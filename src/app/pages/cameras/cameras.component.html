<section class="panels" aria-labelledby="panels-title">
  <header class="panels__hero" role="banner" aria-label="Cotizador de c치maras frigor칤ficas">
    <div
      class="panels__hero-bg"
      [style.background-image]="
        'linear-gradient(180deg, rgba(11,18,32,.05) 0%, rgba(11,18,32,.72) 100%, var(--bg) 100%), url(' + images.heroBg + ')'
      "
      style="background-position: center; background-size: cover; background-repeat: no-repeat;"
    ></div>

    <div class="panels__hero-content">
      <h1 id="panels-title" class="panels__title">Dise침a tu C치mara Frigor칤fica</h1>
      <p class="panels__subtitle">
        Selecciona los elementos y obt칠n la informaci칩n completa de tu c치mara.
      </p>
    </div>
  </header>

  <div class="scrolling-banner">
    <div class="scrolling-text">
      <span>游댳 Dise침a con precisi칩n 郊쀮잺 Personaliza materiales 郊쀮잺 Calcula dimensiones 郊쀮잺 Recibe asesor칤a experta 郊쀮잺</span>
      <span>游댳 Dise침a con precisi칩n 郊쀮잺 Personaliza materiales 郊쀮잺 Calcula dimensiones 郊쀮잺 Recibe asesor칤a experta 郊쀮잺</span>
    </div>
  </div>

  <div class="container">
    <fieldset class="step-group" aria-label="Paso 1: Selecci칩n de Material">
      <legend class="section-title">1. Escoge el material de la c치mara</legend>
      <div class="selector-cards">
        @for (option of materialOptions; track option.value) {
        <label
          class="card material-card"
          [class.active]="material() === option.value"
          [attr.aria-checked]="material() === option.value"
          role="radio"
          tabindex="0"
        >
          <input
            type="radio"
            name="material"
            [value]="option.value"
            (change)="material.set(option.value)"
            [checked]="material() === option.value"
            [attr.aria-label]="'Seleccionar ' + option.name"
          />
          <div class="material__media">
            <img
              [src]="option.image"
              [alt]="option.name + ' - ' + option.description"
              (error)="onImgError($event)"
              loading="lazy"
            />
          </div>
          <div class="material__body">
            <span class="material__name">{{ option.name }}</span>
          </div>
        </label>
        }
      </div>
    </fieldset>

    <fieldset class="step-group" aria-label="Paso 2: Selecci칩n de Tipo de Puerta">
      <legend class="section-title">2. Elige el tipo de puerta</legend>
      <div class="selector-cards">
        @for (option of puertaOptions; track option.value) {
        <label
          class="card puerta-card"
          [class.active]="puertaTipo() === option.value"
          [attr.aria-checked]="puertaTipo() === option.value"
          role="radio"
          tabindex="0"
        >
          <input
            type="radio"
            name="puerta"
            [value]="option.value"
            (change)="puertaTipo.set(option.value)"
            [checked]="puertaTipo() === option.value"
            [attr.aria-label]="'Seleccionar puerta ' + option.name"
          />
          <div class="material__media">
            <img
              [src]="option.image"
              [alt]="option.name + ' puerta frigor칤fica'"
              (error)="onImgError($event)"
              loading="lazy"
            />
          </div>
          <div class="material__body">
            <span class="material__name">{{ option.name }}</span>
          </div>
        </label>
        }
      </div>
    </fieldset>

    <section class="calc-panel" aria-label="Dimensiones y resumen">
      <div class="calc-inputs">
        <fieldset class="input-group">
          <legend class="section-title section-title--small">3. Ingresa las dimensiones</legend>
          <div class="dimensions-section">
            <div class="plano-container">
              <img
                [src]="images.planoCamara"
                alt="Diagrama de c치mara frigor칤fica con Ancho, Alto y Largo"
                class="plano-image"
              />
            </div>
            <form [formGroup]="medidasForm" class="form-group" aria-label="Entrada de dimensiones">
              <label class="field">
                <span class="field__label">Ancho (m)</span>
                <input
                  type="number"
                  formControlName="ancho"
                  (input)="medidasForm.controls.ancho.setValue(parseValue($event.target.value))"
                  min="0.5"
                  step="0.1"
                  placeholder="Ej: 2.0"
                  aria-label="Ancho en metros de la c치mara"
                />
              </label>

              <label class="field">
                <span class="field__label">Alto (m)</span>
                <input
                  type="number"
                  formControlName="alto"
                  (input)="medidasForm.controls.alto.setValue(parseValue($event.target.value))"
                  min="0.5"
                  step="0.1"
                  placeholder="Ej: 2.5"
                  aria-label="Alto en metros de la c치mara"
                />
              </label>

              <label class="field">
                <span class="field__label">Largo (m)</span>
                <input
                  type="number"
                  formControlName="largo"
                  (input)="medidasForm.controls.largo.setValue(parseValue($event.target.value))"
                  min="0.5"
                  step="0.1"
                  placeholder="Ej: 2.0"
                  aria-label="Largo en metros de la c치mara"
                />
              </label>
            </form>
          </div>
        </fieldset>

        <fieldset class="input-group">
          <legend class="section-title section-title--small">4. Potencia del Motor (Equipo)</legend>
          <div class="selector">
            @for (motor of motorOptions; track motor.value) {
            <label class="chip" tabindex="0">
              <input
                type="radio"
                name="motorHP"
                [value]="motor.value"
                (change)="motorHP.set(motor.value)"
                [checked]="motorHP() === motor.value"
                [attr.aria-label]="'Motor de ' + motor.name"
              />
              {{ motor.name }}
            </label>
            }
          </div>
        </fieldset>

        <fieldset class="input-group">
          <legend class="section-title section-title--small">5. Entrega y Servicio</legend>
          <div class="selector">
            <label class="chip" tabindex="0">
              <input
                type="radio"
                name="instalacion"
                value="recoger"
                (change)="instalacion.set('recoger')"
                [checked]="instalacion() === 'recoger'"
                aria-label="Seleccionar recoger en local"
              />
              Recoger en nuestro local
            </label>
            <label class="chip" tabindex="0">
              <input
                type="radio"
                name="instalacion"
                value="instalar"
                (change)="instalacion.set('instalar')"
                [checked]="instalacion() === 'instalar'"
                aria-label="Seleccionar instalaci칩n en el sitio"
              />
              Instalaci칩n donde usted desee
            </label>
          </div>
        </fieldset>

        @if (instalacion() === 'instalar') {
        <fieldset class="input-group">
          <legend class="section-title section-title--small">Ubicaci칩n de instalaci칩n</legend>
          <div class="selector">
            @for (ubicacion of ubicacionOptions; track ubicacion.value) {
            <label class="chip" tabindex="0">
              <input
                type="radio"
                name="ubicacion"
                [value]="ubicacion.value"
                (change)="instalacionUbicacion.set(ubicacion.value)"
                [checked]="instalacionUbicacion() === ubicacion.value"
                [attr.aria-label]="'Instalaci칩n en ' + ubicacion.name"
              />
              {{ ubicacion.name }}
            </label>
            }
          </div>
        </fieldset>
        }
      </div>

      <div class="summary" aria-label="Resumen de selecci칩n">
        <h3 class="panelcalc__title">Resumen de Selecci칩n</h3>
        <ul class="facts">
          <li>Tipo de panel: <strong>{{ material() }}</strong></li>
          <li>Tipo de puerta: <strong>{{ puertaTipo() | titlecase }}</strong></li>
          <li>Tipo de motor: <strong>{{ motorHP() }} HP</strong></li>
          <li>
            Dimensiones de la c치mara:
            <strong
              >{{ medidasForm.value.ancho }}m (Ancho) 칑 {{ medidasForm.value.alto }}m (Alto) 칑
              {{ medidasForm.value.largo }}m (Largo)</strong
            >
          </li>
          <li>
            Servicio:
            <strong>
              {{ instalacion() === 'recoger'
                ? 'Recoger en local'
                : 'Instalar en ' + (instalacionUbicacion() | titlecase) }}
            </strong>
          </li>
        </ul>

        <button type="button" class="btn-cotizar" (click)="contactarAsesor()">
          Contactarse con un asesor para finalizar la solicitud
        </button>
      </div>
    </section>
  </div>
</section>
