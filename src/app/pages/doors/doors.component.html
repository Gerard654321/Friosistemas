<div class="doors-page-wrapper">
  <section class="hero-section" aria-labelledby="doors-title">
    <div class="hero-gradient-overlay"></div>

    <div class="hero-content container">
      <div class="doors__header">
        <p class="hero-eyebrow">Soluciones de M√°xima Hermeticidad</p>
        <h1 id="doors-title" class="home__title">
            Puertas Frigor√≠ficas a Medida
            <span class="home__title-accent">Cotiza la Soluci√≥n Perfecta para tu Proyecto de Fr√≠o.</span>
        </h1>
        <p class="home__subtitle">
          Dise√±o robusto, cierre herm√©tico y durabilidad industrial. La puerta ideal para cada c√°mara de refrigeraci√≥n o congelaci√≥n, con cotizaci√≥n instant√°nea.
        </p>
      </div>
    </div>
  </section>

  <div class="scrolling-banner">
    <div class="scrolling-text">
      <span>üèóÔ∏è Fabricaci√≥n nacional ‚Ä¢ üöö Env√≠os a todo el Per√∫ ‚Ä¢ ‚ùÑÔ∏è Puertas de alta eficiencia t√©rmica ‚Ä¢ ‚öôÔ∏è Cotizaci√≥n instant√°nea ‚Ä¢ üßä Calidad Cruz del Sur</span>
    </div>
  </div>

  <section class="doors container" aria-labelledby="doors-cotizacion-title">
    <h2 id="doors-cotizacion-title" class="section-title">
        Calculadora R√°pida
        <p class="section-title-subtitle">Sigue estos 3 pasos simples para obtener un precio estimado.</p>
    </h2>

    <div class="cotizacion-grid">
      <form class="doors__form" (ngSubmit)="calcularPrecio()">

        <div class="form-step step-1 card-modern">
          <div class="step-header">
              <span class="step-number">1</span>
              <h3>Selecciona el Tipo de Puerta</h3>
          </div>
          <div class="options" role="radiogroup" aria-label="Selecci√≥n de tipo de puerta">
            <label class="option-card batiente" [class.active]="tipoPuerta === 'batiente'">
              <input type="radio" name="tipoPuerta" value="batiente" [(ngModel)]="tipoPuerta" (change)="calcularPrecio()">
              <div class="card-content">
                <h3>Batiente</h3>
              </div>
            </label>

            <p></p>

            <label class="option-card vaiven" [class.active]="tipoPuerta === 'vaiven'">
              <input type="radio" name="tipoPuerta" value="vaiven" [(ngModel)]="tipoPuerta" (change)="calcularPrecio()">
              <div class="card-content">
                <h3>Vaiv√©n</h3>
              </div>
            </label>

            <p></p>

            <label class="option-card corrediza" [class.active]="tipoPuerta === 'corrediza'">
              <input type="radio" name="tipoPuerta" value="corrediza" [(ngModel)]="tipoPuerta" (change)="calcularPrecio()">
              <div class="card-content">
                <h3>Corrediza</h3>
              </div>
            </label>
          </div>
        </div>

        <div class="form-step step-2 card-modern">
          <div class="step-header">
              <span class="step-number">2</span>
              <h3>Define Dimensiones y Especificaciones</h3>
          </div>
          <div class="form-group dimensions">
            <div>
              <label for="ancho">Ancho de la puerta: </label>
              <input type="number" [(ngModel)]="ancho" name="ancho" step="0.01" min="0.5" max="5.0" (input)="calcularPrecio()" required>
            </div>
            <div>
              <label for="alto">Alto de la puerta: </label>
              <input type="number" [(ngModel)]="alto" name="alto" step="0.01" min="1.0" max="5.0" (input)="calcularPrecio()" required>
            </div>
          </div>

          <div *ngIf="tipoPuerta === 'vaiven'" class="form-group hojas">
            <label for="hojas">N√∫mero de hojas (para puertas Vaiv√©n):</label>
            <select [(ngModel)]="hojas" name="hojas" (change)="calcularPrecio()">
              <option [ngValue]="1">1 hoja (tr√°fico unidireccional)</option>
              <option [ngValue]="2">2 hojas (tr√°fico bidireccional)</option>
            </select>
          </div>
        </div>
      </form>

      <div class="preview-column">
        <div class="form-step step-3 card-modern">
            <div class="step-header">
                <span class="step-number">3</span>
                <h3>Vista Previa y Resultado</h3>
            </div>

            <div class="doors__preview">
              <p class="preview-title">Esquema</p>
              <div
                class="preview-wrapper"
                [style.width.px]="ancho*100 > 300 ? 300 : ancho*100 + 40"
                [style.height.px]="alto*100 + 40"
              >
                <svg *ngIf="tipoPuerta === 'batiente'" [attr.width]="ancho*100" [attr.height]="alto*100" class="door-svg" role="img" aria-label="Esquema de puerta batiente">
                  <rect width="100%" height="100%" fill="#fff" stroke="#0f172a" stroke-width="3" rx="4" ry="4"/>
                  <line x1="0" y1="0" [attr.x2]="ancho*100" y2="0" stroke="#0f172a" stroke-dasharray="4"/>
                  <line x1="0" y1="0" x2="0" [attr.y2]="alto*100" stroke="#0f172a" stroke-dasharray="4"/>
                  <line [attr.x1]="ancho*100" y1="0" [attr.x2]="ancho*100" [attr.y2]="alto*100" stroke="#0f172a" stroke-dasharray="4"/>
                  <line x1="0" [attr.y1]="alto*100" [attr.x2]="ancho*100" [attr.y2]="alto*100" stroke="#0f172a" stroke-dasharray="4"/>
                  <circle [attr.cx]="ancho*100 - 15" [attr.cy]="(alto*100)/2" r="5" fill="#0f172a"/>
                  <text x="50%" y="20" text-anchor="middle" font-size="12" fill="#0f172a">{{ ancho }}m</text>
                  <text
                    [attr.x]="ancho*100 - 10"
                    [attr.y]="(alto*100)/2"
                    text-anchor="end"
                    font-size="12"
                    fill="#0f172a"
                    [attr.transform]="'rotate(90, ' + (ancho*100 - 10) + ', ' + (alto*100)/2 + ')'"
                  >
                    {{ alto }}m
                  </text>
                </svg>

                <svg *ngIf="tipoPuerta === 'vaiven' && hojas === 1" [attr.width]="ancho*100" [attr.height]="alto*100" class="door-svg" role="img" aria-label="Esquema de puerta vaiv√©n de 1 hoja">
                  <rect width="100%" height="100%" fill="#fff" stroke="#0f172a" stroke-width="3" rx="4" ry="4"/>
                  <path [attr.d]="'M 0 0 L ' + (ancho*100) + ' ' + (alto*100) + ' M 0 ' + (alto*100) + ' L ' + (ancho*100) + ' 0'" stroke="#007bff" stroke-width="2" stroke-dasharray="5,3"/>
                  <circle [attr.cx]="(ancho*100)/2" [attr.cy]="(alto*100)/2" r="8" fill="none" stroke="#007bff" stroke-width="2"/>
                </svg>

                <svg *ngIf="tipoPuerta === 'vaiven' && hojas === 2" [attr.width]="ancho*100" [attr.height]="alto*100" class="door-svg" role="img" aria-label="Esquema de puerta vaiv√©n de 2 hojas">
                  <rect width="100%" height="100%" fill="#fff" stroke="#0f172a" stroke-width="3" rx="4" ry="4"/>
                  <line [attr.x1]="(ancho*100)/2" y1="0" [attr.x2]="(ancho*100)/2" [attr.y2]="alto*100" stroke="#0f172a" stroke-width="2"/>
                  <path [attr.d]="'M 0 0 L ' + (ancho*100)/2 + ' ' + (alto*100) + ' M ' + (ancho*100)/2 + ' 0 L ' + (ancho*100) + ' ' + (alto*100)" stroke="#007bff" stroke-width="2" stroke-dasharray="5,3"/>
                  <path [attr.d]="'M 0 ' + (alto*100) + ' L ' + (ancho*100)/2 + ' 0 M ' + (ancho*100)/2 + ' ' + (alto*100) + ' L ' + (ancho*100) + ' 0'" stroke="#007bff" stroke-width="2" stroke-dasharray="5,3"/>
                </svg>

                <svg *ngIf="tipoPuerta === 'corrediza'" [attr.width]="ancho*100" [attr.height]="alto*100" class="door-svg" role="img" aria-label="Esquema de puerta corrediza">
                  <rect width="100%" height="100%" fill="#fff" stroke="#0f172a" stroke-width="3" rx="4" ry="4"/>
                  <line x1="0" y1="10" [attr.x2]="ancho*100" y2="10" stroke="#007bff" stroke-width="3"/>
                  <rect [attr.x]="(ancho*100)/4" y="0" [attr.width]="(ancho*100)*3/4" [attr.height]="alto*100" fill="#f0f4f8" stroke="#0f172a" stroke-width="1.5"/>
                  <rect x="0" y="0" [attr.width]="(ancho*100)*3/4" [attr.height]="alto*100" fill="rgba(255, 255, 255, 0.8)" stroke="#0f172a" stroke-width="1.5" transform="translate(0, 0)"/>
                  <circle [attr.cx]="(ancho*100)*3/4 - 10" [attr.cy]="(alto*100)/2" r="5" fill="#0f172a"/>
                </svg>

                <p *ngIf="!tipoPuerta || !ancho || !alto" class="empty-preview-text">
                    Selecciona y define medidas para generar el esquema.
                </p>
              </div>
            </div>

            <div class="doors__quote" role="status">
                <p><strong>√Årea: </strong> <span>{{ area | number: '1.2-2' }} m¬≤</span></p>
            </div>
        </div>

        <button type="button" (click)="enviarWhatsApp()" class="btn btn--lg btn--whatsapp">
            <i class="fab fa-whatsapp"></i> <span>Confirmar Cotizaci√≥n y Hablar con un Asesor</span>
        </button>
      </div>
    </div>
  </section>
</div>
