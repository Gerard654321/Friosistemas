<section class="panels" aria-labelledby="panels-title">
  <header class="panels__hero" role="banner" aria-label="Paneles aislados">
    <div
      class="panels__hero-bg"
      aria-hidden="true"
      [style.background-image]="
        'linear-gradient(180deg, rgba(11,18,32,.05) 0%, rgba(11,18,32,.72) 60%, var(--bg) 100%), url(' + images.panels + ')'
      "
      style="background-position: center; background-size: cover; background-repeat: no-repeat;"
    ></div>

    <div class="panels__hero-content">
      <h1 id="panels-title" class="panels__title">Paneles aislados</h1>
      <p class="panels__subtitle">
        Aqui podras cotizar paneles de <strong>Poliestireno para techo</strong>, <strong>Poliestireno para pared</strong> o <strong>Poliuretano para pared</strong>.
      </p>
    </div>
  </header>

  <section class="panels__materials container" aria-labelledby="materials-title">
    <h2 id="materials-title" class="section-title">Conoce nuestros paneles</h2>

    <article class="materials" role="list">
      <article class="material card" role="listitem">
        <figure class="material__media">
          <img
            [src]="images.epsTecho"
            alt="Panel EPS para techo"
            loading="lazy"
            width="1200"
            height="675"
            (error)="onImgError($event)"
          />
        </figure>
        <div class="material__body">
          <h3 class="material__title">Poliestireno para techo</h3>
          <p class="material__text">
            Plancha de <strong>3.00 m × 1.16 m</strong> con un espesor de <strong>200 mm</strong>.
          </p>
        </div>
      </article>

      <article class="material card" role="listitem">
        <figure class="material__media">
          <img
            [src]="images.epsPared"
            alt="Panel EPS para pared"
            loading="lazy"
            width="1200"
            height="675"
            (error)="onImgError($event)"
          />
        </figure>
        <div class="material__body">
          <h3 class="material__title">Poliestireno para pared</h3>
          <p class="material__text">
            Cuenta con un ancho de <strong>1.16 m</strong>, contamos con espesores de <strong>100 mm</strong> y <strong>200 mm</strong>.
          </p>
        </div>
      </article>

      <article class="material card" role="listitem">
        <figure class="material__media">
          <img
            [src]="images.pur"
            alt="Panel PUR para pared"
            loading="lazy"
            width="1200"
            height="675"
            (error)="onImgError($event)"
          />
        </figure>
        <div class="material__body">
          <h3 class="material__title">Poliuretano para pared</h3>
          <p class="material__text">
            Plancha de <strong>11.95 m × 1.12 m</strong>, contamos con espesores de <strong>100</strong> y <strong>150 mm</strong>.
          </p>
        </div>
      </article>
    </article>
  </section>

  <div class="divider" role="separator" aria-hidden="true"></div>

  <h2 class="section-title section-title--small">Cotiza tus paneles</h2>

  <section class="container" aria-label="Selector de material a cotizar">
    <fieldset class="selector">
      <legend class="selector__legend">Material</legend>
      <label class="chip">
        <input
          type="radio"
          name="material"
          value="EPS"
          [checked]="material() === 'EPS'"
          (change)="material.set('EPS')"
        />
        <span>Poliestireno (EPS)</span>
      </label>
      <label class="chip">
        <input
          type="radio"
          name="material"
          value="PUR"
          [checked]="material() === 'PUR'"
          (change)="material.set('PUR')"
        />
        <span>Poliuretano (PUR)</span>
      </label>
    </fieldset>

    <fieldset
      class="selector"
      *ngIf="material() === 'EPS'"
      aria-label="Tipo de panel EPS"
    >
      <legend class="selector__legend">Tipo de EPS</legend>
      <label class="chip">
        <input
          type="radio"
          name="epsTipo"
          value="techo"
          [checked]="epsTipo() === 'techo'"
          (change)="epsTipo.set('techo')"
        />
        <span>Techo</span>
      </label>
      <label class="chip">
        <input
          type="radio"
          name="epsTipo"
          value="pared"
          [checked]="epsTipo() === 'pared'"
          (change)="epsTipo.set('pared')"
        />
        <span>Pared</span>
      </label>
    </fieldset>
  </section>

  <section
    *ngIf="material() === 'EPS' && epsTipo() === 'techo'"
    class="panelcalc card container"
    aria-labelledby="eps-techo-title"
  >
    <h3 id="eps-techo-title" class="panelcalc__title">EPS – Techo</h3>

    <div class="grid2">
      <div>
        <img
          [src]="images.epsTecho"
          alt="Panel EPS para techo"
          width="1200"
          height="675"
          (error)="onImgError($event)"
        />
        <ul class="facts" role="list">
          <li>Plancha: <strong>3.00 m × 1.16 m</strong> ({{ epsTechoM2PorPlacha | number:'1.2-2' }} m²)</li>
          <li>Espesor: <strong>200 mm</strong></li>
        </ul>
      </div>

      <form
        [formGroup]="epsFormTecho"
        class="form"
        novalidate
        aria-labelledby="eps-techo-title"
        lang="es-PE"
      >
        <label class="field">
          <span class="field__label">Cantidad de planchas</span>
          <input
            type="number"
            formControlName="cantidad"
            min="1"
            inputmode="numeric"
            aria-describedby="eps-techo-ayuda"
          />
          <small id="eps-techo-ayuda" class="field__hint">Cada plancha = {{ epsTechoM2PorPlacha | number:'1.2-2' }} m²</small>
        </label>

        <div class="actions">
          <button
            type="button"
            class="btn btn--primary"
            (click)="pedirEpsTecho()"
            [disabled]="epsFormTecho.invalid"
            [attr.aria-disabled]="epsFormTecho.invalid"
          >
            Conversar con un asesor
          </button>
        </div>
      </form>
    </div>
  </section>

  <section
    *ngIf="material() === 'EPS' && epsTipo() === 'pared'"
    class="panelcalc card container"
    aria-labelledby="eps-pared-title"
  >
    <h3 id="eps-pared-title" class="panelcalc__title">EPS – Pared</h3>

    <div class="grid2">
      <div>
        <img
          [src]="images.epsPared"
          alt="Panel EPS para pared"
          width="1200"
          height="675"
          (error)="onImgError($event)"
        />
        <ul class="facts" role="list">
          <li>Ancho fijo: <strong>{{ EPS_PARED_ANCHO }} m</strong></li>
          <li>Espesor: <strong>100</strong> o <strong>200 mm</strong></li>
        </ul>
      </div>

      <form
        [formGroup]="epsFormPared"
        class="form"
        novalidate
        aria-labelledby="eps-pared-title"
        lang="es-PE"
      >
        <label class="field">
          <span class="field__label">Espesor</span>
          <select formControlName="espesor">
            <option value="100">100 mm</option>
            <option value="200">200 mm</option>
          </select>
        </label>

        <label class="field">
          <span class="field__label">Metros de largo (X)</span>
          <input
            type="number"
            formControlName="largoMetros"
            min="0.5"
            step="0.1"
            inputmode="decimal"
            aria-describedby="eps-pared-ayuda"
          />
          <small id="eps-pared-ayuda" class="field__hint">Ancho fijo = {{ EPS_PARED_ANCHO }} m</small>
        </label>

        <div class="actions">
          <button
            type="button"
            class="btn btn--primary"
            (click)="pedirEpsPared()"
            [disabled]="epsFormPared.invalid"
            [attr.aria-disabled]="epsFormPared.invalid"
          >
            Conversar con un asesor
          </button>
        </div>
      </form>
    </div>
  </section>

  <section
    *ngIf="material() === 'PUR'"
    class="panelcalc card container"
    aria-labelledby="pur-title"
  >
    <h3 id="pur-title" class="panelcalc__title">Poliuretano (PUR) – Pared</h3>

    <div class="grid2">
      <div>
        <img
          [src]="images.pur"
          alt="Panel PUR para pared"
          width="1200"
          height="675"
          (error)="onImgError($event)"
        />
        <ul class="facts" role="list">
          <li>Plancha: <strong>11.95 m × 1.12 m</strong></li>
        </ul>
      </div>

      <form
        [formGroup]="purForm"
        class="form"
        novalidate
        aria-labelledby="pur-title"
        lang="es-PE"
      >
        <label class="field">
          <span class="field__label">Espesor</span>
          <select formControlName="espesor">
            <option value="100">100 mm</option>
            <option value="150">150 mm</option>
          </select>
        </label>

        <label class="field">
          <span class="field__label">Cantidad de planchas</span>
          <input
            type="number"
            formControlName="cantidad"
            min="1"
            inputmode="numeric"
          />
        </label>

        <div class="actions">
          <button
            type="button"
            class="btn btn--primary"
            (click)="pedirPur()"
            [disabled]="purForm.invalid"
            [attr.aria-disabled]="purForm.invalid"
          >
            Conversar con un asesor
          </button>
        </div>
      </form>
    </div>
  </section>
</section>
